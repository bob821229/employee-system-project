import{_ as B,u as W,r as Y,c as K,o as L,a as r,b as c,d as V,e,w as l,f as p,F as k,g as h,h as g,i as F,s as Q,j as D,k as T,p as q,l as G,m as H}from"./index-BStde46P.js";const J=v=>(q("data-v-5e6c7013"),v=v(),G(),v),O={class:"about"},R=J(()=>H("h1",{style:{"text-align":"center","margin-top":"20px"}},"個人簡歷",-1)),X={__name:"AboutView",setup(v){const s=W();Y(s.getUserInfo.role);const n=Y(s.tmpUserInfo.curriculumVitae),w=K(()=>n.value.name===s.getUserInfo.userName||s.getUserInfo.role=="3"),I=Y(["博士論文","碩士論文","期刊","研討會論文","其他"]),P=()=>{n.value.workExperience.push({company:"",position:"",period:null})},j=i=>{if(n.value.workExperience.length<=1){alert("最少一筆");return}n.value.workExperience.splice(i,1)},C=()=>{n.value.annualPublications.push({category:"",date:"",name:""})},M=i=>{if(n.value.annualPublications.length<=1){alert("最少一筆");return}n.value.annualPublications.splice(i,1)},E=()=>{n.value.annualProjects.push({sponsorUnit:"",period:null,projectName:""})},N=i=>{if(n.value.annualProjects.length<=1){alert("最少一筆");return}n.value.annualProjects.splice(i,1)},$=()=>{let i=s.tmpUserInfo.firebaseKey;console.log("firebaseKey:",i);let u=s.tmpUserInfo.userName==s.getUserInfo.userName;console.log("isSelf:",u),u?(s.getUserInfo=deepCopy(s.tmpUserInfo),console.log("本人更新成功:",s.tmpUserInfo)):console.log("非本人更新成功:",s.tmpUserInfo),Q(D(T,`users/${i}`),s.tmpUserInfo)};return L(()=>{}),(i,u)=>{const y=r("el-text"),b=r("el-divider"),o=r("el-col"),m=r("el-input"),d=r("el-form-item"),x=r("el-date-picker"),_=r("el-button"),U=r("el-row"),S=r("el-option"),A=r("el-select"),z=r("el-form");return c(),V("div",O,[e(z,{model:n.value,"label-position":"top",size:"large",disabled:!w.value},{default:l(()=>[R,e(U,{gutter:10},{default:l(()=>[e(o,{span:24},{default:l(()=>[e(b,null,{default:l(()=>[e(y,{size:"large",tag:"b"},{default:l(()=>[p("基本資料")]),_:1})]),_:1})]),_:1}),e(o,{sm:24,md:12,lg:6},{default:l(()=>[e(d,{label:"姓名"},{default:l(()=>[e(m,{modelValue:n.value.name,"onUpdate:modelValue":u[0]||(u[0]=a=>n.value.name=a),placeholder:"請輸入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{sm:24,md:12,lg:6},{default:l(()=>[e(d,{label:"學歷"},{default:l(()=>[e(m,{modelValue:n.value.educationalQualifications,"onUpdate:modelValue":u[1]||(u[1]=a=>n.value.educationalQualifications=a),placeholder:"請輸入學歷"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{sm:24,md:12,lg:6},{default:l(()=>[e(d,{label:"專長"},{default:l(()=>[e(m,{modelValue:n.value.expertise,"onUpdate:modelValue":u[2]||(u[2]=a=>n.value.expertise=a),placeholder:"請輸入專長"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{sm:24,md:12,lg:6},{default:l(()=>[e(d,{label:"專業證照"},{default:l(()=>[e(m,{modelValue:n.value.professionalLicense,"onUpdate:modelValue":u[3]||(u[3]=a=>n.value.professionalLicense=a),placeholder:"請輸入專業證照"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(b,null,{default:l(()=>[e(y,{size:"large",tag:"b"},{default:l(()=>[p("經歷")]),_:1})]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(d,null,{default:l(()=>[(c(!0),V(k,null,h(n.value.workExperience,(a,f)=>(c(),g(U,{style:{width:"100%"},gutter:10,key:f,class:"work-experience-item"},{default:l(()=>[e(o,{span:6},{default:l(()=>[e(d,{label:"單位"},{default:l(()=>[e(m,{modelValue:a.company,"onUpdate:modelValue":t=>a.company=t,placeholder:"請輸入單位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:6},{default:l(()=>[e(d,{label:"職稱"},{default:l(()=>[e(m,{modelValue:a.position,"onUpdate:modelValue":t=>a.position=t,placeholder:"請輸入職稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:9},{default:l(()=>[e(d,{label:"起訖年月"},{default:l(()=>[e(x,{modelValue:a.period,"onUpdate:modelValue":t=>a.period=t,type:"monthrange","range-separator":"至","start-placeholder":"開始年月","end-placeholder":"結束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:3},{default:l(()=>[e(d,{style:{display:"flex","align-items":"flex-end","justify-content":"center",width:"100%",height:"100%"}},{default:l(()=>[e(_,{type:"success",onClick:u[4]||(u[4]=t=>P())},{default:l(()=>[p("新增")]),_:1}),e(_,{type:"danger",onClick:t=>j(f)},{default:l(()=>[p("刪除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(b,null,{default:l(()=>[e(y,{size:"large",tag:"b"},{default:l(()=>[p("歷年著作")]),_:1})]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(d,null,{default:l(()=>[(c(!0),V(k,null,h(n.value.annualPublications,(a,f)=>(c(),g(U,{style:{width:"100%"},gutter:10,key:f,class:"work-experience-item"},{default:l(()=>[e(o,{span:4},{default:l(()=>[e(d,{label:"類型"},{default:l(()=>[e(A,{modelValue:a.category,"onUpdate:modelValue":t=>a.category=t,placeholder:"選擇類型",multiple:!1,filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1},{default:l(()=>[(c(!0),V(k,null,h(I.value,t=>(c(),g(S,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:4},{default:l(()=>[e(d,{label:"時間"},{default:l(()=>[e(x,{modelValue:a.period,"onUpdate:modelValue":t=>a.period=t,type:"month","value-format":"YYYY-MM",format:"YYYY-MM",placeholder:"時間"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:13},{default:l(()=>[e(d,{label:"名稱"},{default:l(()=>[e(m,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,placeholder:"請輸入名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:3},{default:l(()=>[e(d,{style:{display:"flex","align-items":"flex-end","justify-content":"center",width:"100%",height:"100%"}},{default:l(()=>[e(_,{type:"success",onClick:u[5]||(u[5]=t=>C())},{default:l(()=>[p("新增")]),_:1}),e(_,{type:"danger",onClick:t=>M(f)},{default:l(()=>[p("刪除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(b,null,{default:l(()=>[e(y,{size:"large",tag:"b"},{default:l(()=>[p("歷年參與之專案計畫")]),_:1})]),_:1})]),_:1}),e(o,{span:24},{default:l(()=>[e(d,null,{default:l(()=>[(c(!0),V(k,null,h(n.value.annualProjects,(a,f)=>(c(),g(U,{style:{width:"100%"},gutter:10,key:f,class:"work-experience-item"},{default:l(()=>[e(o,{span:4},{default:l(()=>[e(d,{label:"委託單位"},{default:l(()=>[e(m,{modelValue:a.sponsorUnit,"onUpdate:modelValue":t=>a.sponsorUnit=t,placeholder:"請輸入委託單位"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:9},{default:l(()=>[e(d,{label:"起訖年月"},{default:l(()=>[e(x,{modelValue:a.period,"onUpdate:modelValue":t=>a.period=t,type:"monthrange","range-separator":"至","start-placeholder":"開始年月","end-placeholder":"結束年月",format:"YYYY-MM","value-format":"YYYY-MM"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:8},{default:l(()=>[e(d,{label:"計畫名稱"},{default:l(()=>[e(m,{modelValue:a.projectName,"onUpdate:modelValue":t=>a.projectName=t,placeholder:"請輸入名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(o,{span:3},{default:l(()=>[e(d,{style:{display:"flex","align-items":"flex-end","justify-content":"center",width:"100%",height:"100%"}},{default:l(()=>[e(_,{type:"success",onClick:u[6]||(u[6]=t=>E())},{default:l(()=>[p("新增")]),_:1}),e(_,{type:"danger",onClick:t=>N(f)},{default:l(()=>[p("刪除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),w.value?(c(),g(o,{key:0,span:24,style:{"text-align":"center","margin-top":"30px"}},{default:l(()=>[e(_,{type:"success",onClick:u[7]||(u[7]=a=>$())},{default:l(()=>[p("保存")]),_:1})]),_:1})):F("",!0)]),_:1})]),_:1},8,["model","disabled"])])}}},ee=B(X,[["__scopeId","data-v-5e6c7013"]]);export{ee as default};
