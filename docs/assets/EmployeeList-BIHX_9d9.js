import{u as G,q as W,r as i,c as L,n as X,o as Y,a as u,b as C,d as Z,m as h,h as A,w as t,i as S,e as l,F as O,j as D,C as Q,D as ee,G as ae,H as le,f as m,E as R,k as U,s as oe}from"./index-BStde46P.js";const te={style:{width:"100%","max-width":"1500px",margin:"auto"}},ne={style:{display:"flex","justify-content":"space-between",padding:"10px 0"}},re=h("span",null,"您確定要刪除該筆資料?",-1),se={class:"dialog-footer"},ie={class:"dialog-footer"},me={__name:"EmployeeList",setup(ue){const b=G(),_=W(),E=i(b.getUserInfo.role),w=i(null),r=i({userName:"",account:"",password:"",role:"",key:L(()=>r.value.account+r.value.password)}),P=X({userName:[{required:!0,message:"請輸入用戶名稱",trigger:"blur"}],role:[{required:!0,message:"請選擇權限等級",trigger:"change"}],account:[{required:!0,message:"請輸入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入密碼",trigger:"blur"}]}),$=async a=>{a&&a.validate(e=>{e?(R({message:"驗證成功",type:"success"}),f.value=!1,b.resetTmpUserInfo(r.value.key,r.value.role,r.value.userName),_.push("/form")):R({message:"驗證失敗",type:"error"})})},q=a=>{a&&(a.resetFields(),f.value=!1)},p=i(!1),f=i(!1),F=i([{text:"研究一所",value:"研究一所"},{text:"研究二所",value:"研究二所"},{text:"研究三所",value:"研究三所"},{text:"研究四所",value:"研究四所"},{text:"數位發展處",value:"數位發展處"},{text:"教育推廣處",value:"教育推廣處"},{text:"國際合作處",value:"國際合作處"}]);i({employeeId:"",department:"",arrivalDate:null,name:"",idNumber:"",sex:"",birthday:null,homePhone:"",phone:"",residenceAddress:"",mailingAddress:"",email:"",specialStatus:[],drvingLicense:[],maritalStatus:[],schools:[{name:"",department:"",period:null}],workExperience:[{company:"",position:"",salary:null,leavingReason:"",period:null}],languages:[],computerExpertise:[],professionalLicense:"",emergencyContact:{name:"",relationship:"",phone:"",mobile:""},bank:{account:"",branchName:""}}),i([{employeeId:"E001",department:"研究一所",arrivalDate:"2023-01-15",name:"張三",idNumber:"A123456789",sex:"男",birthday:"1985-03-22",homePhone:"02-12345678",phone:"0912345678",residenceAddress:"台北市中正區中山路1號",mailingAddress:"台北市中正區中山路1號",email:"zhangsan@example.com",specialStatus:["原住民"],drvingLicense:["機車"],maritalStatus:"已婚",schools:[{name:"台灣大學",department:"資訊工程系",period:["2007-01","2011-12"]},{name:"台灣大學",department:"資訊工程系",period:["2007-01","2011-12"]}],workExperience:[{company:"ABC科技公司",position:"軟體工程師",salary:6e4,leavingReason:"尋求更好發展",period:["2007-07","2012-12"]}],languages:["中文","英文"],computerExpertise:["JavaScript","Java","Python"],professionalLicense:"資訊安全管理師",emergencyContact:{name:"李四",relationship:"兄弟",phone:"02-87654321",mobile:"0987654321"},bank:{account:"123456789012",branchName:"台北市南門分行"}},{employeeId:"E002",department:"研究二所",arrivalDate:"2022-09-01",name:"李四",idNumber:"B987654321",sex:"女",birthday:"1990-06-15",homePhone:"03-12345678",phone:"0987654321",residenceAddress:"新竹市東區光復路100號",mailingAddress:"新竹市東區光復路100號",email:"lisi@example.com",specialStatus:["身心障礙"],drvingLicense:["機車"],maritalStatus:"未婚",schools:[{name:"交通大學",department:"電子工程系",period:["2007-07","2012-12"]}],workExperience:[{company:"XYZ科技公司",position:"硬體工程師",salary:55e3,leavingReason:"搬家",period:["2007-07","2012-12"]}],languages:["中文","日文"],computerExpertise:["C++","VHDL"],professionalLicense:"電子工程師證照",emergencyContact:{name:"王五",relationship:"朋友",phone:"03-87654321",mobile:"0912345678"},bank:{account:"987654321098",branchName:"新竹市民生分行"}},{employeeId:"E003",department:"研究三所",arrivalDate:"2021-03-20",name:"王五",idNumber:"C135792468",sex:"男",birthday:"1980-12-05",homePhone:"04-12345678",phone:"0978654321",residenceAddress:"台中市西區美村路200號",mailingAddress:"台中市西區美村路200號",email:"wangwu@example.com",specialStatus:["身心障礙","原住民"],drvingLicense:["機車","汽車"],maritalStatus:"未婚",schools:[{name:"中興大學",department:"會計學系",period:["2007-07","2012-12"]}],workExperience:[{company:"財務顧問公司",position:"財務分析師",salary:7e4,leavingReason:"家庭原因",period:["2007-07","2012-12"]}],languages:["中文","英文"],computerExpertise:["Excel","SAP"],professionalLicense:"會計師證照",emergencyContact:{name:"趙六",relationship:"姐姐",phone:"04-87654321",mobile:"0987654321"},bank:{account:"567890123456",branchName:"台中市大墩分行"}},{employeeId:"E004",department:"數位發展部",arrivalDate:"2020-11-11",name:"趙六",idNumber:"D246810121",sex:"女",birthday:"1995-08-25",homePhone:"05-12345678",phone:"0965123456",residenceAddress:"嘉義市西區林森路300號",mailingAddress:"嘉義市西區林森路300號",email:"zhaoliu@example.com",specialStatus:[],drvingLicense:[],maritalStatus:"未婚",schools:[{name:"嘉義大學",department:"行銷管理系",period:["2007-07","2012-12"]}],workExperience:[{company:"行銷顧問公司",position:"行銷專員",salary:45e3,leavingReason:"公司搬遷",period:["2007-07","2012-12"]}],languages:["中文","英語"],computerExpertise:["Photoshop","Illustrator"],professionalLicense:"行銷策劃師",emergencyContact:{name:"陳七",relationship:"母親",phone:"05-87654321",mobile:"0935123456"},bank:{account:"345678901234",branchName:"嘉義市民雄分行"}},{employeeId:"E005",department:"教育推廣部",arrivalDate:"2021-06-01",name:"陳七",idNumber:"E135791357",sex:"男",birthday:"1992-11-11",homePhone:"06-12345678",phone:"0956123456",residenceAddress:"台南市東區東門路400號",mailingAddress:"台南市東區東門路400號",email:"chenqi@example.com",specialStatus:[],drvingLicense:["機車"],maritalStatus:"未婚",schools:[{name:"成功大學",department:"國際企業學系",period:["2007-07","2012-12"]}],workExperience:[{company:"客服服務公司",position:"客服專員",salary:4e4,leavingReason:"職業轉換",period:["2007-07","2012-12"]}],languages:["中文","韓文"],computerExpertise:["Word","Excel"],professionalLicense:"客服服務證照",emergencyContact:{name:"楊八",relationship:"父親",phone:"06-87654321",mobile:"0912345678"},bank:{account:"789012345678",branchName:"台南市南區分行"}}]);const v=i([]),k=i(""),T=L(()=>{const a=k.value.trim().toLowerCase();return a?v.value.filter(e=>{let{employeeId:n,name:d,department:s,professionalLicense:V}=e.basicInformation;const y=V.some(c=>c.toLowerCase().includes(a));return n.toLowerCase().includes(a)||d.toLowerCase().includes(a)||s.toLowerCase().includes(a)||y}):v.value}),B=(a,e,n)=>(console.log("value:",a,"row:",e,"column:",n),e.basicInformation.department===a),H=a=>{console.log("目前選定:",a),b.setTmpUserInfo(a),_.push("/form")},I=()=>{v.value.length=0;let a=D(U,"/users");a=Q(a,ae("ifEnable"),ee(!0)),le(a,e=>{e.forEach(n=>{const d=n.key,s=n.val();s.firebaseKey=d,v.value.push(s)})}),console.log("tableData1:",v.value)},g=i({}),j=a=>{console.log(a.curriculumVitae),b.setTmpUserInfo(a),_.push("/about")},z=a=>{g.value=a,p.value=!0},K=async()=>{try{g.value.ifEnable=!1,oe(D(U,`users/${g.value.firebaseKey}`),g.value),console.log("該資料已刪除")}catch(a){console.error("刪除失敗:",a)}finally{p.value=!1,g.value.length=0,I()}};return Y(()=>{I()}),(a,e)=>{const n=u("el-button"),d=u("el-input"),s=u("el-table-column"),V=u("el-table"),y=u("el-dialog"),c=u("el-form-item"),x=u("el-option"),M=u("el-select"),J=u("el-form");return C(),Z(O,null,[h("div",te,[h("div",ne,[E.value==="3"?(C(),A(n,{key:0,plain:"",onClick:e[0]||(e[0]=o=>f.value=!0)},{default:t(()=>[m(" 新增人員 ")]),_:1})):S("",!0),l(d,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=o=>k.value=o),style:{width:"240px"},placeholder:"搜尋"},null,8,["modelValue"])]),l(V,{data:T.value,style:{width:"100%"},size:"large","max-height":"700","scrollbar-always-on":!0,border:""},{default:t(()=>[l(s,{width:"120","header-align":"center",fixed:"",prop:"basicInformation.employeeId",label:"人員編號"}),l(s,{width:"150","header-align":"center",prop:"basicInformation.name",label:"姓名"}),l(s,{width:"250","header-align":"center",prop:"basicInformation.department",label:"部門",filters:F.value,"filter-method":B,"filter-multiple":""},null,8,["filters"]),l(s,{"header-align":"center",prop:"basicInformation.professionalLicense",label:"專業證照"}),E.value==="3"?(C(),A(s,{key:0,width:"200",align:"center","header-align":"center",fixed:"right",label:"編輯"},{default:t(o=>[l(n,{type:"primary",plain:"",onClick:N=>H(o.row)},{default:t(()=>[m("修改")]),_:2},1032,["onClick"]),l(n,{type:"danger",plain:"",onClick:N=>z(o.row)},{default:t(()=>[m(" 刪除 ")]),_:2},1032,["onClick"])]),_:1})):S("",!0),l(s,{width:"100",align:"center","header-align":"center",fixed:"right",label:"個人簡歷"},{default:t(o=>[l(n,{type:"primary",plain:"",onClick:N=>j(o.row)},{default:t(()=>[m("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),l(y,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),title:"警告",width:"500","align-center":""},{footer:t(()=>[h("div",se,[l(n,{onClick:e[2]||(e[2]=o=>p.value=!1)},{default:t(()=>[m("取消")]),_:1}),l(n,{type:"primary",onClick:K},{default:t(()=>[m(" 確定 ")]),_:1})])]),default:t(()=>[re]),_:1},8,["modelValue"]),l(y,{modelValue:f.value,"onUpdate:modelValue":e[10]||(e[10]=o=>f.value=o),title:"新增人員",width:"500","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{footer:t(()=>[h("div",ie,[l(n,{onClick:e[8]||(e[8]=o=>q(w.value))},{default:t(()=>[m("取消")]),_:1}),l(n,{type:"primary",onClick:e[9]||(e[9]=o=>$(w.value))},{default:t(()=>[m(" 確認 ")]),_:1})])]),default:t(()=>[l(J,{ref_key:"ruleFormRef2",ref:w,model:r.value,rules:P},{default:t(()=>[l(c,{label:"用戶名稱",prop:"userName"},{default:t(()=>[l(d,{modelValue:r.value.userName,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.userName=o),placeholder:"請輸入名稱"},null,8,["modelValue"])]),_:1}),l(c,{label:"權限",prop:"role"},{default:t(()=>[l(M,{modelValue:r.value.role,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.role=o),placeholder:"請選擇權限"},{default:t(()=>[l(x,{disabled:"",label:"請選擇",value:""}),l(x,{label:"員工",value:"1"}),l(x,{label:"主管",value:"2"}),l(x,{label:"人事",value:"3"})]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"帳號",prop:"account"},{default:t(()=>[l(d,{modelValue:r.value.account,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.account=o),placeholder:"請輸入帳號"},null,8,["modelValue"])]),_:1}),l(c,{label:"密碼",prop:"password"},{default:t(()=>[l(d,{modelValue:r.value.password,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.password=o),placeholder:"請輸入密碼"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}};export{me as default};
